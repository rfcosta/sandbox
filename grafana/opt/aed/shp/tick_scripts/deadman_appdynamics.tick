var logLocation = '/var/log/shp/deadman_alerts.log'

var execScript = '/opt/aed/shp/bin/GenerateDeadmanEvent.py'

var metric = stream
    |from()
        .database('kpi')
        .retentionPolicy('days')
        .measurement('metric')
    |where(lambda: "source" == 'AppDynamics')

metric
    |deadman(1.0, 4m)
        .id('AppD_Deadman')
        .message('AppDynamics Deadman')
        .details('Source: AppDynamics')
        .log(logLocation)
        .exec('python', execScript)
